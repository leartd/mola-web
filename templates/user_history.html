{% extends "base_template.html" %}
{% block content %}
    <div class="row top-padding-fix">
        <div class="container">
            <h1>Review History</h1>
        {% for review in posts %}
            <div class="panel panel-default review" id="{{review.key.id}}">
                <div class="panel-heading" style="background-color:#e1e1e1;" >
                    <span class="page-link" style="float:left;"><a href="/location/{{review.loc_id}}">{{ review.loc_name }}</a></span>
                    <span class="review-date">{{review.time_created.month}}/{{review.time_created.day}}/{{review.time_created.year}}</span>
                </div>
                <!-- <div class="panel-body" style="margin-top:-0px; background-color:#f4f4f4">
                    <form action="/history/edit/" method="post">
                        <div class="col-md-3 well">
                            <div>
                                <label>Vision:</label>
                                <img class="user-reviews" src = "/static/images/{{review.vision_rating}}_star.gif" tile="{{review.vision_rating}} Star Rating" alt="{{review.vision_rating}} Stars" />
                            </div>
                            <div>
                                <label>Mobility:</label>
                                <img class="user-reviews" src = "/static/images/{{review.mobility_rating}}_star.gif" tile="{{review.mobility_rating}} Star Rating" alt="{{review.mobility_rating}} Stars" />
                            </div>
                            <div>
                                <label>Speech</label>
                                <img class="user-reviews" src = "/static/images/{{review.speech_rating}}_star.gif" tile="{{review.speech_rating}} Star Rating" alt="{{review.speech_rating}} Stars" />
                            </div>
                            <div>
                                <label>Helpfulness</label>
                                <img class="user-reviews" src = "/static/images/{{review.helpfulness_rating}}_star.gif" tile="{{review.helpfulness_rating}} Star Rating" alt="{{review.helpfulness_rating}} Stars" />
                            </div>
                        </div> 
                        <div class="col-md-9 text-review">
                            <textarea class="review-text" style="width:100%" rows="8">{{review.text}}</textarea>
                        </div>
                        <div class="hidden-button pull-right">
                            <button class="btn btn-default">Change Review</button>
                        </div>
                    </form>
                </div> -->
                <!-- <div class="row review row-fix form_padding collapse" id="add-location-fix"> -->
                <!-- <h2>Add Review</h2> -->

                <!-- <div id="addReview" class="collapse"> -->
                    <form role="form" name="review_form" action="/history/edit" class="review_form" method="POST">
                        <div class="col-md-3">   
                            <div class="form-group ratings">       
                                <div class="form-group form-inline">
                                    <label for="vision_input">Vision:</label>
                                    <span class="review-section" style="cursor:default;width:65%; float:right;">
                                            <input type="radio" class="rating-input" id="rating-input-1-5" name="Vision" value="5" {% if review.vision_rating == 5 %}checked{% endif %} />
                                        <label for="rating-input-1-5" class="rating-star"></label>
                                            <input type="radio" class="rating-input" id="rating-input-1-4" name="Vision" value="4" {% if review.vision_rating == 4 %}checked{% endif %}/>
                                        <label for="rating-input-1-4" class="rating-star"></label>
                                            <input checked type="radio" class="rating-input" id="rating-input-1-3" name="Vision" value="3" {% if review.vision_rating == 3 %}checked{% endif %}/>
                                        <label checked for="rating-input-1-3" class="rating-star"></label>
                                            <input type="radio" class="rating-input" id="rating-input-1-2" name="Vision" value="2" {% if review.vision_rating == 2 %}checked{% endif %} />
                                        <label for="rating-input-1-2" class="rating-star"></label>
                                            <input type="radio" class="rating-input" id="rating-input-1-1" name="Vision" value="1" {% if review.vision_rating == 1 %}checked{% endif %}/>
                                        <label for="rating-input-1-1" class="rating-star"></label>
                                    </span>
                                    <!-- <input class="form-control" id="vision_input" type="text" name="Vision" style="width:50%; float:right;"> -->
                                </div>
                                <div class="form-group form-inline">
                                    <label for="mobility_input">Mobility</label>
                                    <span class="review-section" style="width:65%; float:right;">
                                        <input type="radio" class="rating-input"
                                                id="rating-input-2-5" name="Mobility" value="5" {% if review.mobility_rating == 5 %}checked{% endif %} />
                                        <label for="rating-input-2-5" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-2-4" name="Mobility" value="4" {% if review.mobility_rating == 4 %}checked{% endif %} />
                                        <label for="rating-input-2-4" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-2-3" name="Mobility" value="3" {% if review.mobility_rating == 3 %}checked{% endif %} />
                                        <label for="rating-input-2-3" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-2-2" name="Mobility" value="2" {% if review.mobility_rating == 2 %}checked{% endif %} />
                                        <label for="rating-input-2-2" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-2-1" name="Mobility" value="1" {% if review.mobility_rating == 1 %}checked{% endif %} />
                                        <label for="rating-input-2-1" class="rating-star"></label>
                                    </span>
                                    <!-- <input class="form-control" id="mobility_input" type="text" name="Mobility" style="width:50%; float:right;"> -->
                                </div>
                                <div class="form-group form-inline">
                                    <label for="speech_input">Speech</label>
                                    <span class="review-section" style="width:65%; float:right;">
                                        <input type="radio" class="rating-input"
                                                id="rating-input-3-5" name="Speech" value="5" {% if review.speech_rating == 5 %}checked{% endif %} />
                                        <label for="rating-input-3-5" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-3-4" name="Speech" value="4" {% if review.speech_rating == 4 %}checked{% endif %} />
                                        <label for="rating-input-3-4" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-3-3" name="Speech" value="3" {% if review.speech_rating == 3 %}checked{% endif %} />
                                        <label for="rating-input-3-3" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-3-2" name="Speech" value="2" {% if review.speech_rating == 2 %}checked{% endif %} />
                                        <label for="rating-input-3-2" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-3-1" name="Speech" value="1" {% if review.speech_rating == 1 %}checked{% endif %} />
                                        <label for="rating-input-3-1" class="rating-star"></label>
                                    </span>
                                    <!-- <input class="form-control" id="speech_input" type="text" name="Speech" style="width:50%; float:right;"> -->
                                </div>
                                <div class="form-group form-inline">
                                    <label for="helpfulness_input">Helpfulness</label>
                                    <span class="review-section" style="width:65%; float:right;">
                                        <input type="radio" class="rating-input"
                                                id="rating-input-4-5" name="Helpfulness" value="5" {% if review.helpfulness_rating == 5 %}checked{% endif %} />
                                        <label for="rating-input-4-5" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-4-4" name="Helpfulness" value="4" {% if review.helpfulness_rating == 4 %}checked{% endif %} />
                                        <label for="rating-input-4-4" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-4-3" name="Helpfulness" value="3" {% if review.helpfulness_rating == 3 %}checked{% endif %} />
                                        <label for="rating-input-4-3" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-4-2" name="Helpfulness" value="2" {% if review.helpfulness_rating == 2 %}checked{% endif %} />
                                        <label for="rating-input-4-2" class="rating-star"></label>
                                        <input type="radio" class="rating-input"
                                                id="rating-input-4-1" name="Helpfulness" value="1" {% if review.helpfulness_rating == 1 %}checked{% endif %} />
                                        <label for="rating-input-4-1" class="rating-star"></label>
                                    </span>
                                    <!-- <input class="form-control" id="helpfulness_input" type="text" name="Helpfulness" style="width:50%; float:right;"> -->
                                </div>
                            </div>
                        </div>
                        <div class="col-md-9">   
                            <div class="form-group">
                                <label for="review_text">Your Review</label>
                                <textarea readonly name="text" id="review_text" cols="50 " rows="8" class="form-control">{{review.text}}</textarea>
                            </div>  
                            <div class="form-group">
                                <input type="hidden" value="{{review.key.id}}" id="post_id" name="post_id" />
                                <input type="submit" class="btn btn-default hidden-button" value="Submit" />
                            </div>
                        </div>

                    </form>
                <div class="panel-footer clearfix">
                    <div class="pull-right button-group">
                        <form action="/history/delete/" id="{{review.key.id}}" method="post">
                            <input type="hidden" name="post_id" value="{{review.key.id}}">
                            <input type="button" value="Edit" onclick="make_editable({{review.key.id}})" class="btn btn-default" />
                            <button class="btn btn-default" onclick="document.getElementById('{{review.key.id}}').submit();">Delete</button>
                        </form>
                    </div>
                </div>
            </div>
        {% endfor %}
        <script>
            function setup() { 
                $(".review-text").attr('readonly', true);
                $(".hidden-button").attr("style", "visibility:hidden;");
                $(".rating-input").prop('disabled', true);
                $(".rating-input").attr('style', 'cursor:default;');
            }
            function make_editable(post_id) {
                var current = $("#" + post_id + " textarea").attr("readonly");
                var display = current ? "visibility:normal;" : "visibility:hidden;"
                $("#" + post_id + " textarea").attr("readonly", !current);
                $("#" + post_id + " .hidden-button").attr("style", display);
                $("#" + post_id + " .review-section").toggleClass("rating");
                $(".rating-input").prop('disabled', function(i, v) { return !v; })
            };
        </script>
    </div>
    </div>
{% endblock content %}