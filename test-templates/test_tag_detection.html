<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Test Tag Detection</title>
        <script>
        var tags = ["BLUE", "RED", "GREEN", "YELLOW"]
        function getCaret(el) { 
          if (el.selectionStart) { 
            return el.selectionStart; 
          } else if (document.selection) { 
            el.focus(); 

            var r = document.selection.createRange(); 
            if (r == null) { 
              return 0; 
            } 

            var re = el.createTextRange(), 
                rc = re.duplicate(); 
            re.moveToBookmark(r.getBookmark()); 
            rc.setEndPoint('EndToStart', re); 

            return rc.text.length; 
          }  
          return 0; 
        }

        function checkWord(textArea) {
            position = getCaret(textArea);
            text = textArea.value.slice(0, position);
            text_replaced = text.replace(/[\.,-\/#!$%\^&\*;:{}=\_`~()\r\n]/g,' ');
            last_word = text_replaced.trim().split(' ').reverse()[0];
            if (tags.indexOf(last_word.toUpperCase()) > -1) {
                console.log(last_word);
            }
        }
        </script>
    </head>
    <body>
        <textarea name="something" id="textarea" cols="30" rows="10"></textarea>
        <script>
        textarea = document.getElementById("textarea");
        textarea.onkeypress = function(ev){
           ev = ev || window.event;

           var key = ev.keyCode || ev.which;
           if (String.fromCharCode(key).match(/[\.,-\/#!$%\^&\*;:{}=\_`~() \r\n]/)) {
                checkWord(textarea);
           }
        }
        </script>
    </body>
</html>